{"version":3,"sources":["webpack:///./src/assets/img/backspace.svg","webpack:///./src/views/troves/index.vue?2fef","webpack:///./src/assets/img/delete-b.svg","webpack:///./src/views/troves/index.vue?8c4e","webpack:///src/views/troves/index.vue","webpack:///./src/views/troves/index.vue?7a20","webpack:///./src/views/troves/index.vue?2b3a","webpack:///src/common/mixin/initLiquity.vue","webpack:///./src/common/mixin/initLiquity.vue","webpack:///./src/common/mixin/initLiquity.vue?35b6","webpack:///./src/contactLogic/buildr/liquity.js","webpack:///./node_modules/debounce/index.js","webpack:///./src/assets/img/import.svg"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","$t","onreachbottom","getColumns","troveList","scopedSlots","_u","key","fn","ref","row","ownerAddress","collateral","Debt","class","color","collateralRatio","disable","on","$event","cleartrove","staticRenderFns","mixins","initLiquity","data","shortAdress","clampedPage","showLoading","methods","$data","list","liquidatableInRecoveryMode","gte","trove","debt","lte","lusdInStabilityPool","liquidatableInNormalMode","price","collateralRatioIsBelowMinimum","mounted","setTimeout","_this","id","setInterval","liquityState","clearInterval","computed","liquityInstance","val","columns","components","loading","component","inject","liquityReady","AddressZero","undefinedAddress","isReady","ethersprovider","ethChainID","isConnect","ethAddress","getLiquityInstance","userAddress","account","frontendTag","useStore","setLiquityMethods","liquity","init","debounce","watch","value","created","require","EthersLiquity","_connectByChainId","Percent","MINIMUM_COLLATERAL_RATIO","toString","CRITICAL_COLLATERAL_RATIO","minFeeRate","gasLimit","config","stableName","liquidationRatio","LUSD_LIQUIDATION_RESERVE","LUSD_MINIMUM_DEBT","getMaxBorrowingRate","borrowingRate","add","fetchLiquityEntity","library","chainID","connection","getSigner","undefined","_from","getGasEstimate","depositAmount","borrowLUSDAmount","populate","openTrove","depositCollateral","borrowLUSD","tx","estimateGas","rawPopulatedTransaction","originalGasEstimate","maxBorrowingRate","send","transaction","base","closeTrove","feeFrom","original","edited","change","whatChanged","type","params","mul","Decimal","ZERO","calcTroveIndicators","debtAmount","originalTrove","Trove","setCollateral","setDebt","borrowingFee","isEmpty","liquidationReserve","typeOptions","deposit","withdraw","borrow","repay","fetchAdjustBalanace","coinAmount","unit","withdrawCollateral","repayLUSD","adjustTrove","func","wait","immediate","timeout","args","context","timestamp","result","later","last","Date","now","apply","debounced","arguments","callNow","clear","clearTimeout","flush"],"mappings":"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","file":"js/chunk-55c88814.4392a5c4.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/backspace.59e0f9e0.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=bcc283ac&lang=less&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/delete-b.7cf746d1.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"troves-wrapper\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"title-warpper\"},[_c('div',{staticClass:\"title-content\"},[_c('img',{attrs:{\"src\":require(\"../../assets/img/import.svg\"),\"alt\":\"import\"}}),_c('h2',[_vm._v(_vm._s(_vm.$t('troves.title')))])]),_c('p',[_vm._v(_vm._s(_vm.$t('troves.subTitle1')))]),_c('p',[_vm._v(\" \"+_vm._s(_vm.$t('troves.subTitle2'))+\" \")])])]),_c('div',{staticClass:\"list-wapper\"},[_c('h2',[_vm._v(_vm._s(_vm.$t('troves.tableTitle')))]),(_vm.showLoading)?_c('div',[_c('loading')],1):_c('Scroll',{attrs:{\"loading-text\":'loading....',\"on-reach-bottom\":_vm.onreachbottom,\"height\":400}},[_c('Table',{attrs:{\"columns\":_vm.getColumns,\"data\":_vm.troveList},scopedSlots:_vm._u([{key:\"Owner\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"Owner\"},[_c('p',[_vm._v(_vm._s(row.ownerAddress))])])]}},{key:\"Collateral\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"Collateral\"},[_c('p',[_vm._v(_vm._s(row.collateral)+\" BNB\")])])]}},{key:\"Debt\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"Debt\"},[_c('p',[_vm._v(_vm._s(row.Debt)+\" LAI\")])])]}},{key:\"Coll.Ratio\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"Coll.Ratio\"},[_c('p',{class:row.color},[_vm._v(\" \"+_vm._s(row.collateralRatio)+\" \")])])]}},{key:\"Coll.Liquidate\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"Coll.Ratio\"},[_c('p',[(row.disable == false)?_c('img',{attrs:{\"src\":require(\"../../assets/img/backspace.svg\"),\"alt\":\"delete\"},on:{\"click\":function($event){return _vm.cleartrove(row.ownerAddress, row.disable)}}}):_c('Tooltip',{attrs:{\"content\":row.disable,\"placement\":\"left\"}},[_c('img',{attrs:{\"src\":require(\"../../assets//img/delete-b.svg\"),\"alt\":\"delete\"}})])],1)])]}}])})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"troves-wrapper\">\n    <div class=\"content\">\n      <div class=\"title-warpper\">\n        <div class=\"title-content\">\n          <img src=\"../../assets/img/import.svg\" alt=\"import\">\n          <h2>{{ $t('troves.title') }}</h2>\n        </div>\n        <p>{{ $t('troves.subTitle1') }}</p>\n        <p>\n          {{ $t('troves.subTitle2') }}\n        </p>\n      </div>\n      <!-- <div class=\"liquidata\">\n        <div class=\"title-content\">\n          <img src=\"../../assets/img/paper.svg\" alt=\"liquidata\">\n          <h2>Liquidate</h2>\n        </div>\n        <div class=\"input-warpper flex items-center\">\n          <p>Up to</p>\n          <div class=\"input-item\">\n            <input type=\"number\">\n          </div> -->\n\n      <!-- <p>Troves</p> -->\n      <!-- <img src=\"../../assets/img/delete.svg\" alt=\"delete\"> -->\n      <!-- </div>\n      </div> -->\n    </div>\n    <div class=\"list-wapper\">\n      <h2>{{ $t('troves.tableTitle') }}</h2>\n      <div v-if=\"showLoading\">\n        <loading />\n      </div>\n      <Scroll v-else :loading-text=\"'loading....'\" :on-reach-bottom=\"onreachbottom\" :height=\"400\">\n        <Table :columns=\"getColumns\" :data=\"troveList\">\n          <template slot=\"Owner\" slot-scope=\"{ row }\">\n            <div class=\"Owner\">\n              <p>{{ row.ownerAddress }}</p>\n            </div>\n          </template>\n          <template slot=\"Collateral\" slot-scope=\"{ row }\">\n            <div class=\"Collateral\">\n              <p>{{ row.collateral }} BNB</p>\n            </div>\n          </template>\n          <template slot=\"Debt\" slot-scope=\"{ row }\">\n            <div class=\"Debt\">\n              <p>{{ row.Debt }} LAI</p>\n            </div>\n          </template>\n          <template slot=\"Coll.Ratio\" slot-scope=\"{ row }\">\n            <div class=\"Coll.Ratio\">\n              <p :class=\"row.color\">\n                {{ row.collateralRatio }}\n              </p>\n            </div>\n          </template>\n          <template slot=\"Coll.Liquidate\" slot-scope=\"{ row }\">\n            <div class=\"Coll.Ratio\">\n              <p>\n                <img\n                  v-if=\"row.disable == false\"\n                  src=\"../../assets/img/backspace.svg\"\n                  alt=\"delete\"\n                  @click=\"cleartrove(row.ownerAddress, row.disable)\"\n                >\n                <Tooltip v-else :content=\"row.disable\" placement=\"left\">\n                  <img src=\"../../assets//img/delete-b.svg\" alt=\"delete\">\n                </Tooltip>\n\n                <!-- <img src=\"../../assets/img/Trash.svg\" alt=\"delete\" @click=\"cleartrove(row.ownerAddress,row.disable)\"> -->\n              </p>\n            </div>\n          </template>\n        </Table>\n      </Scroll>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport event from '@/common/js/event';\nimport initLiquity from '@/common/mixin/initLiquity';\n\nimport {\n  MINIMUM_COLLATERAL_RATIO,\n  CRITICAL_COLLATERAL_RATIO,\n} from '@liquity/lib-base';\n\nexport default {\n  mixins: [initLiquity],\n  data() {\n    return {\n      troveList: [],\n      shortAdress: '',\n      clampedPage: 0,\n      showLoading:false\n    };\n  },\n  methods: {\n    async cleartrove(ownerAddress, disable) {\n      console.log('ownerAddress');\n      if (disable == false) {\n        try {\n          const data = await this.liquity.send.liquidate(ownerAddress, { gasLimit: this.$globalConfig.gasLimit });\n          event.$emit('sendSuccess');\n\n          event.$emit('sendtx', [\n            data.rawSentTransaction,\n            {\n              okinfo: `Liquidation ${ownerAddress} success`,\n              failinfo: `Liquidation ${ownerAddress} fail`,\n            },\n          ]);\n        } catch (ex) {\n          console.log(ex);\n        }\n        // this.list();\n      } else {\n        this.$Notice.warning({\n          title: this.$t('notice.n'),\n          desc: disable,\n        });\n      }\n    },\n    onreachbottom() {\n      this.$data.clampedPage += 1;\n      this.list();\n    },\n    async list() {\n      const pageSize = 20;\n      const clampedPage = this.$data.clampedPage;\n      const { numberOfTroves, price, total, lusdInStabilityPool, blockTag } = this.liquityState;\n      const recoveryMode = total.collateralRatioIsBelowCritical(price);\n      const totalCollateralRatio = total.collateralRatio(price);\n      const data = await this.liquity.getTroves(\n        {\n          first: pageSize,\n          sortedBy: 'ascendingCollateralRatio',\n          startingAt: clampedPage * pageSize,\n        },\n        { blockTag }\n      );\n      data.forEach((trove) => {\n        if (recoveryMode) {\n          trove.disable = this.liquidatableInRecoveryMode(trove, price, totalCollateralRatio, lusdInStabilityPool);\n        } else {\n          trove.disable = this.liquidatableInNormalMode(trove, price);\n        }\n\n        const collateralRatio = trove.collateralRatio(price);\n\n        trove.color = collateralRatio.gt(CRITICAL_COLLATERAL_RATIO)\n          ? 'success'\n          : collateralRatio.gt(1.2)\n          ? 'warning'\n          : 'danger';\n        trove.collateral = trove.collateral.prettify();\n        trove.Debt = trove.debt.prettify();\n        trove.collateralRatio = collateralRatio.mul(100).prettify() + '%';\n\n        // if(collateralRatio.lt(1.1)){\n\n        // }\n      });\n      this.$data.troveList = this.$data.troveList.concat(data);\n      // this.shortAdress = `${this.troveList.ownerAddress.slice(0, 6)}...${this.ethAddress.slice(-6)}`;\n      console.log(this.$data.troveList);\n    },\n    liquidatableInRecoveryMode(trove, price, totalCollateralRatio, lusdInStabilityPool) {\n      const collateralRatio = trove.collateralRatio(price);\n      if (collateralRatio.gte(MINIMUM_COLLATERAL_RATIO) && collateralRatio.lt(totalCollateralRatio)) {\n        if (trove.debt.lte(lusdInStabilityPool)) {\n          return false;\n        } else {\n          return \"There's not enough LAY in the Stability pool to cover the debt\";\n        }\n      } else {\n        return this.liquidatableInNormalMode(trove, price);\n      }\n    },\n    liquidatableInNormalMode(trove, price) {\n      if (trove.collateralRatioIsBelowMinimum(price)) {\n        return false;\n      } else {\n        return 'Collateral ratio not low enough';\n      }\n    },\n  },\n  mounted() {\n    console.log('---');\n    this.$data.showLoading =true;\n    const _this = this;\n    event.$on('txsuccess', () => {\n      setTimeout(() => {\n        _this.$data.clampedPage = 0;\n        _this.$data.troveList = [];\n        _this.list();\n      }, 3000);\n    });\n\n    var id = setInterval(() => {\n      if (_this.liquityState && _this.liquityState.price && this.liquity&&this.liquity.getTroves) {\n        clearInterval(id);\n        try {\n          \n          _this.list();\n        } catch (error) {\n          console.log(error);\n        }\n        this.$data.showLoading = false;\n        \n      }\n    }, 100);\n  },\n  computed: {\n    ...mapState('pool', ['liquity']),\n    ...mapState('buildr', ['liquityState', 'liquityReady']),\n    liquityInstance() {\n      const val = this.liquity && this.liquity.send;\n      return val;\n    },\n    getColumns() {\n      const columns = [\n        {\n          title: this.$t('troves.owner'),\n          slot: 'Owner',\n          minWidth: 350,\n        },\n        {\n          title: this.$t('troves.collateral'),\n          slot: 'Collateral',\n          minWidth: 50,\n        },\n        {\n          title: this.$t('troves.debt'),\n          slot: 'Debt',\n          minWidth: 50,\n        },\n        {\n          title: this.$t('troves.ratio'),\n          slot: 'Coll.Ratio',\n          minWidth: 100,\n        },\n        {\n          title: this.$t('troves.liquidate'),\n          slot: 'Coll.Liquidate',\n          minWidth: 50,\n        },\n      ];\n      return columns;\n    }\n  },\n  components: {\n    loading: () => import('@/components/basic/loading.vue'),\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.troves-wrapper {\n  font-family: Gilroy-Bold, Gilroy;\n  color: #ffffff;\n  h2 {\n    font-size: 26px;\n    font-family: Gilroy-Bold, Gilroy;\n    font-weight: 500;\n    color: #ffffff;\n    line-height: 38px;\n  }\n  .title-content {\n    margin: 8px 0 16px;\n    display: flex;\n    align-items: center;\n    img {\n      max-width: 30px;\n      margin-right: 10px;\n    }\n  }\n  .content {\n    width: 100%;\n    background: linear-gradient(270deg, #3f5efb 0%, #fc466b 100%);\n    border-radius: 12px;\n    padding: 24px;\n    position: relative;\n    .title-warpper {\n      p {\n        font-size: 16px;\n        font-family: Gilroy-Medium, Gilroy;\n        font-weight: 500;\n        color: #ffffff;\n        line-height: 16px;\n        margin: 8px 0 16px;\n      }\n    }\n    .liquidata {\n      margin-top: 40px;\n      width: 40%;\n      .input-warpper {\n        margin-top: 16px;\n        p {\n          font-size: 24px;\n        }\n        .input-item {\n          width: 60%;\n          height: 34px;\n          margin: 0 10px;\n          border-radius: 10px;\n          overflow: hidden;\n          border: 2px solid #fff;\n          input {\n            width: 100%;\n            height: 100%;\n            background: transparent;\n            color: #fff;\n            font-size: 20px;\n            padding: 5px 10px;\n          }\n        }\n        img {\n          cursor: pointer;\n          max-width: 26px;\n          margin-left: 10px;\n        }\n      }\n    }\n  }\n  .list-wapper {\n    margin-top: 30px;\n    box-shadow: 0px 0px 40px 0px rgba(0, 0, 0, 0.06);\n    padding: 24px;\n    border-radius: 12px;\n    h2 {\n      color: #333;\n      margin-bottom: 16px;\n    }\n    img {\n      max-width: 30px;\n    }\n  }\n}\n.success {\n  color: green;\n}\n.warning {\n  color: #ffd77a;\n}\n.danger {\n  color: red;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=bcc283ac&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=bcc283ac&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bcc283ac\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { mapState, mapActions } from 'vuex';\nimport { fetchLiquityEntity } from '@/contactLogic/buildr/liquity';\nimport { AddressZero } from '@ethersproject/constants';\nimport { EthersLiquity, _connectByChainId } from '@webfans/lib-ethers';\nimport event from '@/common/js/event';\nimport Vue from 'vue';\n\nconst debounce = require('debounce');\n\nlet isSubscribe = false;\nlet liquity;\n\nexport default {\n  inject: ['reload'],\n  data() {\n    return {\n      liquityReady: false,\n      AddressZero,\n      undefinedAddress: 'undefined'\n    };\n  },\n  computed: {\n    ...mapState(['ethersprovider', 'ethChainID', 'ethAddress']),\n    isReady() {\n      return this.ethersprovider && this.ethChainID && this.undefinedAddress;\n    },\n    isConnect() {\n      return this.ethersprovider && this.ethChainID && this.ethAddress;\n    }\n  },\n  methods: {\n    ...mapActions('buildr', ['setLiquityState']),\n    ...mapActions('pool', ['setLiquityMethods']),\n    getLiquityInstance() {\n      const provider = this.ethersprovider;\n      const account = this.ethAddress;\n      const chainId = this.ethChainID;\n\n      const connection = _connectByChainId(provider, account?provider.getSigner(account):undefined, chainId, {\n        userAddress: account,\n        frontendTag: AddressZero,\n        useStore: 'blockPolled',\n      });\n      const liquity = EthersLiquity._from(connection);\n      this.setLiquityMethods(liquity);\n    },\n    init: debounce(function() {\n      console.log('init');\n\n          const params = {\n            chainID: this.ethChainID,\n            library: this.ethersprovider,\n            account: this.ethAddress,\n          };\n          \n          \n          liquity = fetchLiquityEntity(params);\n        \n          console.log('init store');\n          liquity.store.onLoaded = () => {\n\n            this.setLiquityState(liquity.store.state);\n\n            this.liquityReady = true;\n\n            this.getLiquityInstance();\n\n            console.log(liquity.store.state);\n          };\n        if(isSubscribe === false && this.ethAddress) {\n\n\n            liquity.store.subscribe(({ newState, oldState }) => {\n              console.log(newState, oldState );\n              this.setLiquityState(newState);\n            });\n            isSubscribe = true;\n            \n        }else{\n          this.liquityReady = true;\n        }\n        liquity.store.start();\n\n      \n    },1000),\n\n\n\n  },\n  watch: {\n    isReady(value) {\n      // console.log('isReady');\n      if (value) this.init();\n    },\n    isConnect(value) {\n      // console.log('isConnect');\n      if (value) this.init();\n    }\n  },\n  created() {\n    if (this.isReady) {\n      this.init();\n    }\n  },\n  mounted() {\n    event.$on('txsuccess', () => {\n      if(this.$route.name=='lpPool'){\n        this.reload();\n      }\n\n    });\n  },\n};\n</script>\n","var render, staticRenderFns\nimport script from \"./initLiquity.vue?vue&type=script&lang=js&\"\nexport * from \"./initLiquity.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initLiquity.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./initLiquity.vue?vue&type=script&lang=js&\"","const { EthersLiquity,  _connectByChainId } = require(\"@webfans/lib-ethers\");\nimport {\n  Percent,\n  Difference,\n  Decimalish,\n  Decimal,\n  Trove,\n  LiquityStoreState,\n  // LUSD_LIQUIDATION_RESERVE,\n  // LUSD_MINIMUM_DEBT, //系统最小债务\n  MINIMUM_COLLATERAL_RATIO,\n  CRITICAL_COLLATERAL_RATIO,\n} from \"@liquity/lib-base\";\nimport { AddressZero } from '@ethersproject/constants';\nimport config  from '@/config/config.js';\n\nconst mcrPercent = new Percent(MINIMUM_COLLATERAL_RATIO).toString(0);\nconst ccrPercent = new Percent(CRITICAL_COLLATERAL_RATIO).toString(0);\n\n/**********Liquity config start***************/\n// 业务地址\n// const frontendTag = '0xc7B375ce501a2432A25d584dF1f40c73c83f9534';\nconst frontendTag = AddressZero;\n// 最低费率0.5%\nconst minFeeRate = 0.005;\n// Gas Limit\nconsole.log('gasLimit');\nconst gasLimit = config.gasLimit;\nconst openGasLimit = 8000000;\n\nexport const stableName = 'LUSD';\n\nconst liquidationRatio = 1.1;\n// 清算保证金\nconst LUSD_LIQUIDATION_RESERVE = 20;\n\nexport const LUSD_MINIMUM_DEBT = 2000;\n\n/**********Liquity config end***************/\n\n/**\n * 获取最大借贷利率\n * */\nexport const getMaxBorrowingRate = (liquityState) => {\n  return liquityState.borrowingRate.add(minFeeRate).toString();\n};\n\n/**\n * fetch Liquity Entity\n *\n * */\nexport const fetchLiquityEntity = ({library, account, chainID}) => {\n  const connection =  _connectByChainId(library, account?library.getSigner(account):undefined, chainID, {\n    userAddress: account,\n    frontendTag,\n    useStore: \"blockPolled\"\n  });\n  // console.log(connection);\n  const liquity = EthersLiquity._from(connection);\n\n  return liquity;\n};\n\n\n/**\n * Gas Estimate\n * */\n\nexport const getGasEstimate = async ({liquity, library, account, chainID, depositAmount, borrowLUSDAmount}) => {\n  liquity = liquity || fetchLiquityEntity({library, account, chainID});\n\n  const tx = await liquity.populate.openTrove({\n    depositCollateral: depositAmount,\n    borrowLUSD: borrowLUSDAmount,\n  });\n\n  let originalGasEstimate;\n\n  try {\n    originalGasEstimate = await library.estimateGas(tx.rawPopulatedTransaction);\n    originalGasEstimate = originalGasEstimate.add(50000).toString();\n    // console.log('originalGasEstimate',originalGasEstimate, originalGasEstimate.toString(), 99999);\n  } catch (e) {\n    console.log(e, 8888);\n  }\n\n  return originalGasEstimate;\n};\n\n\n/**\n * open Trove\n * */\n\nexport const openTrove = async ({library, account, chainID, depositAmount, borrowLUSDAmount, liquityState}) => {\n  const liquity = fetchLiquityEntity({library, account, chainID});\n  const maxBorrowingRate = getMaxBorrowingRate(liquityState);\n\n  const originalGasEstimate = await getGasEstimate({liquity, library, account, chainID, depositAmount, borrowLUSDAmount});\n\n  const transaction = await liquity.send.openTrove({\n    depositCollateral: depositAmount,\n    borrowLUSD: borrowLUSDAmount,\n  }, maxBorrowingRate,{ gasLimit: originalGasEstimate });\n\n  return {\n    base: `Deposit: ${depositAmount} BNB, Debt: ${borrowLUSDAmount} ${stableName}`,\n    transaction\n  };\n};\n\n/**\n * close Trove\n * */\n\nexport const closeTrove = async ({library, account, chainID}) => {\n  const liquity = fetchLiquityEntity({library, account, chainID});\n  const transaction = await liquity.send.closeTrove({gasLimit: gasLimit});\n  return {\n    base: `Close Vault`,\n    transaction\n  };\n};\n\n\n\n/**\n * calc fee\n * liquidationReserve : 清算准备金 200 LUSD\n * price：清算价格\n * borrowingRate： 借贷利率\n * borrowingFee： 借贷费用\n * collateralRatio： 当前抵押率\n * liquidationRatio: 清算抵押率\n * */\n\nconst feeFrom  = (original, edited, borrowingRate) => {\n  const change = original.whatChanged(edited, borrowingRate);\n  if (change && change.type !== \"invalidCreation\" && change.params.borrowLUSD) {\n    return change.params.borrowLUSD.mul(borrowingRate);\n  } else {\n    return Decimal.ZERO;\n  }\n};\n\nexport const calcTroveIndicators = (liquityState, depositAmount, debtAmount) => {\n  const originalTrove = liquityState.trove;\n  let edited = new Trove(originalTrove.collateral, originalTrove.debt);\n\n  const { price, borrowingRate } = liquityState;\n\n  edited = edited.setCollateral(depositAmount);\n  edited = edited.setDebt(debtAmount);\n\n  const borrowingFee = feeFrom(originalTrove, edited, borrowingRate).toString();\n  const collateralRatio = !edited.isEmpty ? edited.collateralRatio(price).toString() : '';\n  // const originalCollateralRatio = !originalTrove.isEmpty ? originalTrove.collateralRatio(price) : undefined;\n  // const collateralRatioChange = Difference.between(collateralRatio, originalCollateralRatio);\n\n  return {\n    stableName,\n    liquidationReserve: LUSD_LIQUIDATION_RESERVE,\n    price,\n    borrowingRate,\n    borrowingFee,\n    collateralRatio,\n    liquidationRatio\n  };\n};\n\n/**\n * adjust Balance\n *\n * type:\n * deposit 存\n * Withdraw 取\n * Borrow 借\n * Repay 还\n * */\n\nconst typeOptions = {\n  deposit: 'Deposit',\n  withdraw: 'Withdraw',\n  borrow: 'Borrow',\n  repay: 'Repay',\n};\n\nexport const fetchAdjustBalanace = async ({library, account, chainID, liquityState, type, coinAmount, unit}) => {\n  const liquity = fetchLiquityEntity({library, account, chainID});\n  const maxBorrowingRate = getMaxBorrowingRate(liquityState);\n\n  let params = {};\n  switch (type) {\n    case 'deposit': params = { depositCollateral: coinAmount }; break;\n    case 'withdraw': params = { withdrawCollateral: coinAmount }; break;\n    case 'borrow': params = { borrowLUSD: coinAmount }; break;\n    case 'repay': params = { repayLUSD: coinAmount }; break;\n  }\n\n  const transaction = await liquity.send.adjustTrove(params, maxBorrowingRate,{ gasLimit });\n  return {\n    base: `${typeOptions[type]} ${coinAmount} ${unit}`,\n    transaction,\n  };\n};\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","module.exports = __webpack_public_path__ + \"img/import.9780092e.svg\";"],"sourceRoot":""}