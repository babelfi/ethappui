{"version":3,"sources":["webpack:///./src/contactLogic/readbalance.js","webpack:///./src/views/lpPool/index.vue?38ce","webpack:///./node_modules/debounce/index.js","webpack:///./src/views/lpPool/index.vue?9cea","webpack:///./src/contactLogic/earn/lpPool/lpPool.js","webpack:///src/views/lpPool/index.vue","webpack:///./src/views/lpPool/index.vue?3fea","webpack:///./src/views/lpPool/index.vue?145b"],"names":["readSwapBalance","chainID","library","account","TokenA","TokenB","TokenAContract","useTokenContractMulticall","TokenBContract","callList","balanceOf","ethcallProvider","Provider","init","all","TokenAamount","TokenBamount","coinInfo","getChainCoinInfo","symbol","coinName","getBalance","getToken","tokensymbol","coinA","_","find","tokens","chainId","Token","address","decimals","getTokenImg","logoURI","debounce","func","wait","immediate","timeout","args","context","timestamp","result","later","last","Date","now","setTimeout","apply","debounced","this","arguments","callNow","clear","clearTimeout","flush","module","exports","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","BNB","LAI","_v","_s","_m","totalStake","haveStake","BABEL","unclaim","getAddress","on","openPledge","openExtract","openTake","ref","staticRenderFns","BigNumber","require","getTokenInfo","tokenlist","item","toString","toLowerCase","StakingRewardListbatch","list","multiSymbolData","forEach","push","element","useStakingRewardsContractMulticall","rewardRate","uniToken","totalSupply","lqtyToken","infoList","j","index","length","stakingToken_","rewardsToken_","rewardRateNumber","div","toNumber","totalSupplyNumber","rewardTokenSymbol","data","LPTokenAddress","rewardToken","earned","balance","LPTokenbalance","stakingToken","stakingTokenContract","error","infoList2","jj","stakingbalance","earn","haveStack","config","DECIMAL_PLACES","ROUNDING_MODE","ROUND_DOWN","liquidityData","showLoading","components","take","pledge","extract","loading","methods","$refs","open","computed","isReady","ethChainID","ethersprovider","isConnect","ethAddress","bigValue","url","watch","value","getListData","created","mounted","component"],"mappings":"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","file":"js/chunk-2f74235e.3e85331f.js","sourcesContent":["\nimport { Contract, Provider } from '@webfans/ethers-multicall';\nimport { ethers } from 'ethers';\nimport tokens from \"@/constants/token.json\";\nimport _ from 'underscore';\n\nimport { useTokenContractMulticall \n} from \"../contacthelp/useContractMulticall.js\";\n\nimport {  Token, \n} from \"@webfans/uniswapsdk\";\n\nimport getChainCoinInfo from '@/constants/networkCoinconfig.js';\n\nexport async function readSwapBalance(chainID,library, account,TokenA,TokenB){\n    console.log('readSwapBalance');\n     const  TokenAContract = useTokenContractMulticall(TokenA);\n     const  TokenBContract = useTokenContractMulticall(TokenB);\n\n    const callList=[\n        TokenAContract.balanceOf(account),\n        TokenBContract.balanceOf(account)\n    ];\n\n    const ethcallProvider = new Provider(library,chainID);\n    await ethcallProvider.init(); // Only required when `chainId` is not provided in the `Provider` constructor\n    let [TokenAamount,TokenBamount] = await ethcallProvider.all(callList);\n    const coinInfo = getChainCoinInfo(chainID);\n\n    if(TokenA.symbol==coinInfo.coinName){\n        TokenAamount = await library.getBalance(account);\n    }\n\n    if(TokenB.symbol==coinInfo.coinName){\n        TokenBamount = await library.getBalance(account);\n    }\n\n    return{\n        TokenAamount,TokenBamount\n    };\n\n}\n\nexport function getToken(tokensymbol,chainID){\n    console.log(tokens);\n    const coinA= _.find(tokens.tokens,{chainId:chainID,symbol:tokensymbol});\n    const TokenA = new Token(coinA.chainId,coinA.address,coinA.decimals,coinA.symbol);\n    return TokenA;\n}\n\nexport function getTokenImg(tokensymbol,chainID){\n    \n    const coinA= _.find(tokens.tokens,{chainId:chainID,symbol:tokensymbol});\n    if(coinA){\n        return coinA.logoURI;\n    }else{\n        return '';\n\n    }\n    \n}\n\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=d1f5be48&lang=less&scoped=true&\"","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pool-wrapper\"},[(_vm.showLoading)?_c('div',[_c('loading')],1):_c('div',{staticClass:\"pool-content\"},[_c('div',{staticClass:\"lp-title-wrapper\"},[_c('div',{staticClass:\"img-wrapper\"},[_c('img',{attrs:{\"src\":_vm.getTokenImg(_vm.BNB),\"alt\":_vm.BNB}}),_c('img',{staticClass:\"imgRight\",attrs:{\"src\":_vm.getTokenImg(_vm.LAI),\"alt\":_vm.LAI}})]),_c('h2',{staticClass:\"title\",attrs:{\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(_vm.BNB)+\"-\"+_vm._s(_vm.LAI)+\" \")])]),_vm._m(0),_c('div',{staticClass:\"pool-detail\"},[_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"Total Stake\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.totalStake || '--')+\" LP\")])]),_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"Staked\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.haveStake || '--')+\" LP\")])]),_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"Unclaimed \"+_vm._s(_vm.BABEL))]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.unclaim || '--')+\" \"+_vm._s(_vm.BABEL))])])]),_c('div',{staticClass:\"pool-btn-wrapper\"},[(_vm.ethAddress)?[_c('a',{staticClass:\"pancake pool-btn\",attrs:{\"href\":_vm.getAddress,\"target\":\"_blank\"}},[_vm._v(\"Get Uniswap LP\")]),_c('button',{staticClass:\"pool-btn\",on:{\"click\":_vm.openPledge}},[_vm._v(\" Stake LP \")]),_c('button',{staticClass:\"pool-btn\",on:{\"click\":_vm.openExtract}},[_vm._v(\" Claim \")]),_c('button',{staticClass:\"pool-btn\",on:{\"click\":_vm.openTake}},[_vm._v(\" Unstake LP \")])]:[_c('button',{staticClass:\"pool-btn disableBtn\"},[_vm._v(\" Stake LP \")]),_c('button',{staticClass:\"pool-btn disableBtn\"},[_vm._v(\" Claim \")]),_c('button',{staticClass:\"pool-btn disableBtn\"},[_vm._v(\" Unstake LP \")])]],2)]),_c('take',{ref:\"take\"}),_c('pledge',{ref:\"pledge\"}),_c('extract',{ref:\"extract\"})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tag-wrapper flex justify-center items-center\"},[_c('div',{staticClass:\"tag-item tag1\"},[_vm._v(\" BABEL \")]),_c('div',{staticClass:\"tag-item tag2\"},[_vm._v(\" Transfer Fee \")])])}]\n\nexport { render, staticRenderFns }","import multiSymbolData from \"@/constants/earnList.json\";\nimport tokenlist from \"@/constants/token.json\";\nimport { TokenAmount } from \"@webfans/uniswapsdk\";\nimport _ from 'underscore';\nconst BigNumber = require('bignumber.js');\nBigNumber.config({ DECIMAL_PLACES: 6, ROUNDING_MODE: BigNumber.ROUND_DOWN });\n\nimport { Contract, Provider } from '@webfans/ethers-multicall';\n\nimport { useStakingRewardsContractMulticall, useTokenContractMulticall } from \"@/contacthelp/useContractMulticall.js\";\n\n\nfunction getTokenInfo(chainID, address) {\n  let result;\n  _.find(tokenlist.tokens, (item) => {\n    if (item.chainId === chainID && item.address.toString().toLowerCase() === address.toString().toLowerCase()) {\n      result = item;\n    }\n  });\n  return result;\n}\n\nexport async function StakingRewardListbatch(library, account, chainID) {\n  // console.log({ library, account, chainID });\n  const list = multiSymbolData || [];\n  const result = [];\n  list.forEach((item) => {\n    if (item.chainId === chainID) {\n      result.push(item);\n    }\n  });\n  // console.log({ result });\n  let callList = [];\n  result.forEach((element) => {\n    const TokenAContract = useStakingRewardsContractMulticall(element);\n    callList.push(TokenAContract.rewardRate());\n    callList.push(TokenAContract.uniToken());\n    callList.push(TokenAContract.totalSupply());\n    callList.push(TokenAContract.lqtyToken());\n  });\n\n  // callList.push(TokenAContract.rewardRate());\n  // callList.push(TokenAContract.uniToken());\n  // callList.push(TokenAContract.totalSupply());\n  // callList.push(TokenAContract.lqtyToken());\n  const ethcallProvider = new Provider(library, chainID);\n  await ethcallProvider.init(); // Only required when `chainId` is not provided in the `Provider` constructor\n  const infoList = await ethcallProvider.all(callList);\n\n\n  callList = [];\n  let j = 0;\n\n  for (let index = 0; index < infoList.length; index += 4) {\n    const element = result[j];\n    j++;\n    const rewardRate = infoList[index];\n    const totalSupply = infoList[index + 2];\n    const stakingToken_ = infoList[index + 1];\n    const rewardsToken_ = infoList[index + 3];\n\n    // 不需要链接钱包就能获取到的数据\n    const rewardRateNumber = new BigNumber(rewardRate.toString()).div('1e18').toNumber();\n    const totalSupplyNumber = new BigNumber(totalSupply.toString()).div('1e18').toNumber();\n    // console.log({totalSupplyNumber});\n    const rewardTokenSymbol = getTokenInfo(chainID, rewardsToken_);\n    // console.log({rewardTokenSymbol});\n    element.data = {\n      rewardRate: rewardRateNumber,\n      LPTokenAddress: stakingToken_,\n      totalSupply: totalSupplyNumber,\n      rewardToken: rewardTokenSymbol.symbol,\n    };\n    // 未连接钱包状态\n    if (!account) {\n      element.data = {\n        earned: '',\n        balance: '',\n        LPTokenbalance: '',\n        rewardRate: rewardRateNumber,\n        LPTokenAddress: stakingToken_,\n        totalSupply: totalSupplyNumber,\n        rewardToken: rewardTokenSymbol.symbol,\n      };\n    } else {\n      const stakingToken = {\n        address: stakingToken_\n      };\n      try {\n        // const rewardTokenContract = useTokenContractMulticall(rewardToken);\n        const stakingTokenContract = useTokenContractMulticall(stakingToken);\n        const TokenAContract = useStakingRewardsContractMulticall(element);\n        // callList.push(rewardTokenContract.balanceOf(account));\n        callList.push(stakingTokenContract.balanceOf(account));\n        callList.push(TokenAContract.earned(account));\n        callList.push(TokenAContract.balanceOf(account));\n      } catch (error) {\n        console.log(error);\n      }\n      const infoList2 = await ethcallProvider.all(callList);\n      // console.log('infoList2',infoList2);\n      let jj = 0;\n      for (let index = 0; index < infoList2.length; index += 3) {\n        const element = result[jj];\n        // console.log({ element });\n        jj++;\n        // const rewardbalance = infoList2[index];\n        const stakingbalance = infoList2[index];\n        const earn = infoList2[index + 1];\n        const haveStack = infoList2[index + 2];\n\n        // 链接钱包后获取剩下的数据\n        element.data['LPTokenbalance'] = new BigNumber(stakingbalance.toString()).div('1e18').toNumber();\n        element.data['earned'] = new BigNumber(earn.toString()).div('1e18').toNumber();\n        element.data['balance'] = new BigNumber(haveStack.toString()).div('1e18').toNumber();\n\n      }\n    }\n  }\n\n  return result;\n}\n\n\n","<template>\n  <div class=\"pool-wrapper\">\n    <!-- <div class=\"pool-title flex justify-between items-center\">\n      <p class=\"title\">\n        LP Pool\n      </p>\n      <p class=\"subTitle\">\n        LP Pool\n      </p>\n    </div> -->\n\n    <div v-if=\"showLoading\">\n      <loading />\n    </div>\n\n    <div v-else class=\"pool-content\">\n      <div class=\"lp-title-wrapper\">\n        <div class=\"img-wrapper\">\n          <img :src=\"getTokenImg(BNB)\" :alt=\"BNB\">\n          <img :src=\"getTokenImg(LAI)\" class=\"imgRight\" :alt=\"LAI\">\n        </div>\n        <h2 class=\"title\" target=\"_blank\">\n          {{ BNB }}-{{ LAI }}\n        </h2>\n      </div>\n\n      <div class=\"tag-wrapper flex justify-center items-center\">\n        <div class=\"tag-item tag1\">\n          BABEL\n        </div>\n        <div class=\"tag-item tag2\">\n          Transfer Fee\n        </div>\n      </div>\n\n\n\n      <div class=\"pool-detail\">\n        <!-- <div class=\"detail-item\">\n          <span class=\"title\">APY</span>\n          <span class=\"value text-success\">10000%</span>\n        </div> -->\n\n        <div class=\"detail-item\">\n          <span class=\"title\">Total Stake</span>\n          <span class=\"value\">{{ totalStake || '--' }} LP</span>\n        </div>\n\n        <div class=\"detail-item\">\n          <span class=\"title\">Staked</span>\n          <span class=\"value\">{{ haveStake || '--' }} LP</span>\n        </div>\n\n        <div class=\"detail-item\">\n          <span class=\"title\">Unclaimed {{ BABEL }}</span>\n          <span class=\"value\">{{ unclaim || '--' }} {{ BABEL }}</span>\n        </div>\n      </div>\n\n      <div class=\"pool-btn-wrapper\">\n        <template v-if=\"ethAddress\">\n          <a class=\"pancake pool-btn\" :href=\"getAddress\" target=\"_blank\">Get Uniswap LP</a>\n\n          <button class=\"pool-btn\" @click=\"openPledge\">\n            Stake LP\n          </button>\n\n          <button class=\"pool-btn\" @click=\"openExtract\">\n            Claim\n          </button>\n\n          <button class=\"pool-btn\" @click=\"openTake\">\n            Unstake LP\n          </button>\n        </template>\n\n        <template v-else>\n          <button class=\"pool-btn disableBtn\">\n            Stake LP\n          </button>\n\n          <button class=\"pool-btn disableBtn\">\n            Claim\n          </button>\n\n          <button class=\"pool-btn disableBtn\">\n            Unstake LP\n          </button>\n        </template>\n      </div>\n    </div>\n\n    <take ref=\"take\" />\n    <pledge ref=\"pledge\" />\n    <extract ref=\"extract\" />\n  </div>\n</template>\n\n<script>\n// import { pairListEarn } from '@/contactLogic/readpairpool.js';\nimport { StakingRewardListbatch } from '@/contactLogic/earn/lpPool/lpPool.js';\nimport { mapState } from 'vuex';\nimport event from '@/common/js/event';\nimport web3 from 'web3';\nimport _ from 'underscore';\nimport tokenList from '@/constants/token.json';\nconst debounce = require('debounce');\nimport { getTokenImg } from '@/contactLogic/readbalance.js';\n\nexport default {\n  data() {\n    return {\n      liquidityData: {},\n      showLoading: true,\n    };\n  },\n  components: {\n    take: () => import('./dialog/takeoutDialog.vue'),\n    pledge: () => import('./dialog/pledgeDialog.vue'),\n    extract: () => import('./dialog/extractReward.vue'),\n    loading: () => import('@/components/basic/loading.vue'),\n  },\n  methods: {\n    getTokenImg(tokensymbol){\n      const chainID = this.ethChainID;\n      return getTokenImg(tokensymbol,chainID);\n    },\n   getListData:debounce (async function() {\n      this.showLoading = true;\n      try {\n        const data = await StakingRewardListbatch(this.ethersprovider, this.ethAddress, this.ethChainID);\n        console.log(data);\n        // 读取所有的价格信息\n        // const pairListPrice = await pairListEarn(this.ethChainID, this.ethersprovider);\n        const [tempLiquidity] = data.filter((item) => item.kind === 'liquity');\n        // const result = [];\n        // const results = async () => {\n        //   for (let index = 0; index < tempLiquidity.length; index++) {\n        //     const item = tempLiquidity[index];\n        //     const res = await this.getPriceData(item, pairListPrice);\n        //     result.push({\n        //       ...item,\n        //       poolValue: res.usdtNum,\n        //       price: res.price,\n        //     });\n        //   }\n        // };\n        // await results();\n        // this.liquidityData = result;\n        // console.log({result});\n        console.log(tempLiquidity);\n        this.liquidityData = tempLiquidity;\n        // console.log({ tempLiquidity });\n      } catch (error) {\n        console.log(error);\n      } finally {\n        this.showLoading = false;\n      }\n    },1000),\n    async getPriceData(item, pairListPrice) {\n      const obj = {};\n      const tokensymbolA = item.symbol[0];\n      const tokensymbolB = item.symbol[1];\n      const pledgeBalance = item && item.data && item.data.totalSupply;\n      const pledgeBalanceWei = web3.utils.toWei(pledgeBalance.toString());\n      // 匹配读取价格信息\n      const priceItem = _.find(pairListPrice, (pairItem) => {\n        if (\n          (pairItem.pairInfo.tokenAmounts[0].token.symbol == tokensymbolA &&\n            pairItem.pairInfo.tokenAmounts[1].token.symbol == tokensymbolB) ||\n          (pairItem.pairInfo.tokenAmounts[1].token.symbol == tokensymbolA &&\n            pairItem.pairInfo.tokenAmounts[0].token.symbol == tokensymbolB)\n        ) {\n          return pairItem;\n        }\n      });\n      // 构造价格相关信息\n      const data = {\n        aTokenbalance: priceItem.aTokenbalance(pledgeBalanceWei),\n        bTokenbalance: priceItem.bTokenbalance(pledgeBalanceWei),\n        price: priceItem.price(tokensymbolA, tokensymbolB).price,\n      };\n      obj.usdtNum = data.aTokenbalance.multiply(data.price).add(data.bTokenbalance).toSignificant(6);\n      obj.price = data.price && data.price.toSignificant(6);\n      if (tokensymbolA === 'SCASH' && tokensymbolB === 'USDT') {\n        this.$store.commit('changeScashPrice', obj.price);\n      }\n      this.$store.commit('changeEarnPrice', obj.price);\n      return obj;\n    },\n    openPledge() {\n      this.$refs.pledge.open(this.liquidityData);\n    },\n    openExtract() {\n      this.$refs.extract.open(this.liquidityData);\n    },\n    openTake() {\n      this.$refs.take.open(this.liquidityData);\n    },\n  },\n  computed: {\n    ...mapState(['ethersprovider', 'ethChainID', 'ethAddress', 'earnPrice', 'scashPrice','LAI','BABEL','BNB']),\n    isReady() {\n      return this.ethChainID && this.ethersprovider;\n    },\n    isConnect() {\n      return this.ethAddress;\n    },\n    totalStake() {\n      const val = this.liquidityData && this.liquidityData.data && this.liquidityData.data.totalSupply.toString();\n      const bigValue = this.$BigNumber(val).decimalPlaces(2).toNumber();\n      return bigValue;\n    },\n    haveStake() {\n      const val = this.liquidityData && this.liquidityData.data && this.liquidityData.data.balance.toString();\n      const bigValue = this.$BigNumber(val).decimalPlaces(2).toNumber();\n      return bigValue;\n    },\n    unclaim() {\n      const val = this.liquidityData && this.liquidityData.data && this.liquidityData.data.earned.toString();\n      const bigValue = this.$BigNumber(val).decimalPlaces(2).toNumber();\n      return bigValue;\n    },\n    getAddress() {\n      const _this=this;\n      const [item] = tokenList.tokens.filter((item) => {\n        return item.symbol === this.LAI && item.chainId === _this.ethChainID;\n      });\n      if(item==undefined){\n        return '#';\n      }\n      // https://exchange.pancakeswap.finance/#/add/BNB/0x6020CBa45Ce63BE22f904C76047a944Ee85c41c0\n      const url = `https://app.uniswap.org/#/add/${this.BNB}/${item.address}`;\n      return url;\n    },\n  },\n  watch: {\n    isReady(value) {\n      if (value) {\n        this.getListData();\n      }\n    },\n    isConnect(value) {\n      if (value) {\n        this.getListData();\n      }\n    }\n  },\n  created() {\n    if (this.isReady) {\n      this.getListData();\n    }\n  },\n  mounted() {\n    event.$on('txsuccess', () => {\n      this.getListData();\n    });\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import '../../common/css/pool.less';\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=d1f5be48&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=d1f5be48&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d1f5be48\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}